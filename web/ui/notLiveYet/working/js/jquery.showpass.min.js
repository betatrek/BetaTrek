(function(a){a.fn.showPassword=function(b){var c=a.extend({},a.fn.showPassword.defaults,b);return this.each(function(){var n=a(this),k=n.position(),q=n.outerWidth(),l=n.outerHeight(),h=n.parent(),m=h.height(),e=n.attr("id"),r=a.Event("keyup");r.which="35";var f=a.meta?a.extend({},c,n.data()):c;h.height(m);a("<a/>",{href:"#","class":f.linkClass,click:function(s){var t=h.find("."+f.showPasswordInputClass),o=t.attr("id");toggleLink=n.prev(".watermark");if(n.css("display")==="none"){a(this).text(f.linkText);n.val(t.val()).show();t.hide();a("label[for='"+e+"']").show();if(n.val()!==""){n.focus().trigger(r)}else{toggleLink.show();n.trigger(r)}}else{a(this).text(f.showPasswordLinkText);t.val(n.val()).show().focus().trigger(r);n.hide();toggleLink.hide()}s.preventDefault()},css:{left:k.left+q,top:k.top+l},text:f.linkText}).appendTo(h);var j=h.find("."+f.linkClass),i=j.outerWidth(),g=parseInt(j.css("left"),10),d=j.outerHeight(),p=parseInt(j.css("top"),10);j.css({left:(g-i-f.linkRightOffset),top:(p-d-f.linkTopOffset)});if(n.attr("id")=="password"){j.css({left:188,top:102})}a(this).before(a("<input/>",{"class":f.showPasswordInputClass+" password img",id:f.showPasswordInputClass,maxlength:parseInt(a(this).attr("maxlength"),10),css:{display:"none"},type:"text"}));n.closest("form").bind("submit",function(){if(n.css("display")==="none"){var o=n.siblings("."+f.showPasswordInputClass);n.val(o.val()).show();o.hide();a("label[for='"+e+"']").show().trigger(r);n.prev().hide()}})})};a.fn.showPassword.defaults={linkClass:"show-password-link",linkText:"Show",showPasswordLinkText:"Hide",showPasswordInputClass:"password-showing",linkRightOffset:180,linkTopOffset:0}})(jQuery);